<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
    xmlns:mvc="sap.ui.core.mvc"
>
    <Dialog
        id="invoiceDetailsDialog.id"
        title="{i18n>InvoiceDetails}"
        draggable="true"
        resizable="true"
        contentWidth="80%"
        contentHeight="90%"
        class="sapUiContentPadding"
    >
        <Select
            id="payMethodChange.id"
            selectedKey="{dialogState>/PayMethodSelectedKey}"
            width="30%"
            change="onSelectionChange"
            class="sapUiSmallMarginTop sapUiSmallMarginBottom sapUiSmallMarginBegin"
        >
            <core:Item
                key="OPTION_Select"
                text="Select Payment Mode"
            />
            <core:Item
                key="OPTION_Full"
                text="Full"
            />
            <core:Item
                key="OPTION_Partial"
                text="Partial"
            />
        </Select>

        <Table
            id="invoiceTable"
            items="{filtered>/results}"
            width="100%"
        >
            <headerToolbar>
                <Toolbar>
                    <Title text="{filtered>Lifnr}" />
                </Toolbar>
            </headerToolbar>
            <columns>
                <Column>
                    <header>
                        <Label text="{i18n>Catagory}" />
                    </header>
                </Column>
                <Column>
                    <header>
                        <Label text="{i18n>DocumentNo}" />
                    </header>
                </Column>
                <Column>
                    <header>
                        <Label text="{i18n>InvoiceDate}" />
                    </header>
                </Column>
                <Column>
                    <header>
                        <Label text="{i18n>DocumentAmount}" />
                    </header>
                </Column>
                <Column>
                    <header>
                        <Label text="{i18n>FullPayment}" />
                    </header>
                </Column>
                <Column>
                    <header>
                        <Label text="{i18n>ApprovalAmount}" />
                    </header>
                </Column>
                <Column>
                    <header>
                        <Label text="{i18n>Project}" />
                    </header>
                </Column>
            </columns>

            <items>
                <ColumnListItem type="Active">
                    <cells>
                        <Text text="{filtered>Category}" />
                        <Text text="{filtered>Docnr}" />
                        <Text
                            text="{path:'filtered>Budat',formatter:'.formatDate'}"
                        />
                        <Text text="{filtered>DocAmt}" />
                        <Text
                            text="{= ${dialogState>/PayMethodSelectedKey} === 'OPTION_Full' ? 'âœ”' : ''}" 
                        />
                        <Input
                            value="{filtered>ApprovalAmt}" 
                            editable="{= ${dialogState>/PayMethodSelectedKey} === 'OPTION_Partial'}"
                            placeholder="Enter amount"
                        /> 
                        <Text text="{filtered>Project}" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>

        <beginButton>
            <Button
                text="{i18n>Confirm}"
                type="Emphasized"
                press="onConfirmDialog"
                enabled="{= ${dialogState>/PayMethodSelectedKey} !== 'OPTION_Select' }"
    
            />
        </beginButton>
        <endButton>
            <Button
                text="{i18n>Cancel}"
                press="onCloseInvoiceDialog"
                enabled="{= ${dialogState>/PayMethodSelectedKey} !== 'OPTION_Select' }"
    
            />
        </endButton>
    </Dialog>
</core:FragmentDefinition>
